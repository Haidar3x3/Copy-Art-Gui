-- // Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

-- ===== CONFIGURATION =====
local CONFIG = {
    DURATIONS = { INITIAL_BLACK = 5, STAR_APPEAR = 7, MAIN_TRANSITION = 23, FINAL_FLASH = 2, FINAL_FADE = 3 },
    ASSETS = { STAR = "rbxassetid://106308656631867", FONT = "Rye" }, -- FIXED FONT
    STAR_SIZE = { START = 10, MID = 300, END = 350 },
    TEXT_SEQUENCE = {
        {text = "HEY", delay = 1, duration = 2, fade = 0.5},
        {text = "I GAVE YOU MY POWER", delay = 1, duration = 3, fade = 0.5},
        {text = "NOW WAKE UP", delay = 1, duration = 3, fade = 0.5},
        {text = "SLOWLY", delay = 0, duration = 15, fade = 3}
    }
}

-- ===== SCREEN SETUP =====
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create GUI containers
local transitionGui, textGui = Instance.new("ScreenGui"), Instance.new("ScreenGui")
transitionGui.Name, textGui.Name = "FinalTransitionRyeFont", "TextAnimations"
transitionGui.IgnoreGuiInset, transitionGui.ResetOnSpawn = true, false
textGui.ResetOnSpawn = false
transitionGui.Parent, textGui.Parent = playerGui, playerGui

-- Create GUI Elements
local function createGuiElement(class, props, parent)
    local obj = Instance.new(class)
    for k, v in pairs(props) do obj[k] = v end
    obj.Parent = parent
    return obj
end

local blackFrame = createGuiElement("Frame", {Size = UDim2.new(1, 0, 1, 0), BackgroundColor3 = Color3.new(0, 0, 0)}, transitionGui)
local whiteFrame = createGuiElement("Frame", {Size = UDim2.new(1, 0, 1, 0), BackgroundColor3 = Color3.new(1, 1, 1), BackgroundTransparency = 1}, transitionGui)
local star = createGuiElement("ImageLabel", {Size = UDim2.new(0, CONFIG.STAR_SIZE.START, 0, CONFIG.STAR_SIZE.START), AnchorPoint = Vector2.new(0.5, 0.5), BackgroundTransparency = 1, Image = CONFIG.ASSETS.STAR, ImageTransparency = 1}, transitionGui)

-- ===== TEXT ANIMATION =====
local function createText(text, config)
    local textLabel = createGuiElement("TextLabel", {
        Size = UDim2.new(0, 800, 0, 100),
        Position = UDim2.new(0.5, 0, 0.5, 0),
        AnchorPoint = Vector2.new(0.5, 0.5),
        BackgroundTransparency = 1,
        Text = "",
        TextColor3 = Color3.new(1, 1, 1),
        TextSize = 48,
        Font = Enum.Font[CONFIG.ASSETS.FONT], -- FIXED FONT
        TextTransparency = 1,
        ZIndex = 10
    }, textGui)

    task.wait(config.delay)

    TweenService:Create(textLabel, TweenInfo.new(0.5, Enum.EasingStyle.Quad), {TextTransparency = 0}):Play()

    for i = 1, #text do
        textLabel.Text = text:sub(1, i)
        task.wait(0.07)
    end

    task.wait(config.duration)
    TweenService:Create(textLabel, TweenInfo.new(config.fade, Enum.EasingStyle.Quad), {TextTransparency = 1}):Play()
    task.wait(config.fade)
    textLabel:Destroy()
end

-- ===== MAIN ANIMATION =====
local function runTransition()
    task.wait(CONFIG.DURATIONS.INITIAL_BLACK)

    task.spawn(function()
        for _, textConfig in ipairs(CONFIG.TEXT_SEQUENCE) do
            createText(textConfig.text, textConfig)
        end
    end)

    -- Star Animation
    local starTween = TweenService:Create(star, TweenInfo.new(CONFIG.DURATIONS.STAR_APPEAR, Enum.EasingStyle.Quad), {ImageTransparency = 0.3, Size = UDim2.new(0, CONFIG.STAR_SIZE.MID, 0, CONFIG.STAR_SIZE.MID)})
    starTween:Play()
    task.wait(CONFIG.DURATIONS.STAR_APPEAR)

    -- Main Transition
    local whiteTween = TweenService:Create(whiteFrame, TweenInfo.new(CONFIG.DURATIONS.MAIN_TRANSITION, Enum.EasingStyle.Quad), {BackgroundTransparency = 0})
    whiteTween:Play()
    task.wait(CONFIG.DURATIONS.MAIN_TRANSITION)

    -- Final Flash
    local flash = createGuiElement("Frame", {Size = UDim2.new(1, 0, 1, 0), BackgroundColor3 = Color3.new(1, 1, 1), BackgroundTransparency = 1, ZIndex = 20}, transitionGui)
    local flashIn = TweenService:Create(flash, TweenInfo.new(1, Enum.EasingStyle.Quad), {BackgroundTransparency = 0})
    local flashOut = TweenService:Create(flash, TweenInfo.new(1, Enum.EasingStyle.Quad), {BackgroundTransparency = 1})
    
    flashIn:Play()
    task.wait(1)
    flashOut:Play()
    task.wait(1)
    flash:Destroy()

    -- Final Fade
    TweenService:Create(transitionGui, TweenInfo.new(CONFIG.DURATIONS.FINAL_FADE, Enum.EasingStyle.Quint), {BackgroundTransparency = 1}):Play()
    task.wait(CONFIG.DURATIONS.FINAL_FADE)

    -- Cleanup
    transitionGui:Destroy()
    textGui:Destroy()
end

runTransition()
